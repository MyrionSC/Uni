package main;

public class Main {
	public static doorState door = doorState.opened;
	public static boolean alarmFlashing = false;
	public static boolean alarmSound = false;
	public static boolean alarmArmed = false;
	public static java.util.Timer alarmSoundingTimer;
	public static java.util.Timer alarmFlashingTimer;
	public static java.util.Timer alarmArmedTimer;
	
	public static void closeDoor () {
		// turn armed after 2 sec
		alarmArmedTimer = new java.util.Timer();
		alarmArmedTimer.schedule( 
		        new java.util.TimerTask() {
		            @Override
		            public void run() {
		                alarmArmed = true;
		            }
		        }, 
		        2000
		);
	}
	public static void openDoor () {
		if (alarmArmed && door == doorState.locked) {
			// make noise for 3 seconds
			alarmSound = true;
			alarmSoundingTimer = new java.util.Timer();
			alarmSoundingTimer.schedule( 
			        new java.util.TimerTask() {
			            @Override
			            public void run() {
			                alarmSound = false;
			            }
			        }, 
			        3000
			);
			
			// flash for 30 seconds
			alarmFlashing = true;
			alarmFlashingTimer = new java.util.Timer();
			alarmFlashingTimer.schedule( 
			        new java.util.TimerTask() {
			            @Override
			            public void run() {
			                alarmFlashing = false;
			            }
			        }, 
			        30000
			);
		} else {
			alarmArmed = false;
		}
	}
	public static void unlockDoor () {
		alarmSound = false;
		alarmFlashing = false;
		alarmArmed = false;
		alarmSoundingTimer.cancel();
		alarmFlashingTimer.cancel();
		alarmArmedTimer.cancel();
	}
	
	public static void runTests
	
	public static void main(String[] args) {
		closeDoor();
	}
	
	


	enum doorState {
		opened, closed, locked, unlocked
	}
}
